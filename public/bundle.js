var Reactivity=function(e){var t={};function n(o){if(t[o])return t[o].exports;var l=t[o]={i:o,l:!1,exports:{}};return e[o].call(l.exports,l,l.exports,n),l.l=!0,l.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);let o=0,l=0;const i={info(e){let t=document.getElementById("noLogs");t&&""!==t.innerText&&(t.innerText="");let n=document.createElement("p");n.id="logText",n.innerText=e,document.getElementById("logs").appendChild(n)}},r=function(e){this.subscribers=new Set,this.depend=function(e){this.subscribers.add(e)},this.notify=function(){for(let e of this.subscribers)i.info(this.name+" notifying "+e.name),e.update()},this.id=l++,this.name=e};r.target=null;const p=function(e,t,n,...l){this.update=function(){t.apply(n,l)},this.id=o++,this.name=e},a=function(e,t,n,o){console.log("bindPropToTemplate:"+t+":"+this[n]),r.target=new p("Binding prop Watcher: "+t,this.render,this,e,t,o);"function"==typeof this[n]?this[n].apply(this):-1!==n.indexOf(".")?((e,t)=>{let n=t.split(".");console.log(n);let o=e[n[0]];for(let e=1;e<n.length;e++)o=o[n[e]]})(this,n):this[n];r.target=null},c=(e,t,n)=>{t.classList.add(e),setTimeout(()=>{t.classList.remove(e)},n)},d=function(e,t,n){let o=document.getElementById(t);if(o)o.innerHTML=e.apply(this),c("activeProps",o,3e3);else{let l=document.getElementById(n);(o=document.createElement("div")).id=t,o.innerHTML=e.apply(this),l.appendChild(o),c("initProps",o,1e3)}},u=function(e,t,n){if("object"!=typeof e)return e;let o={};for(let l in e){let i=e[l];"object"==typeof e[l]&&(i=u(e[l],t,!0));let p=new r(l);Object.defineProperty(n?o:t,l,{get:function(){return r.target&&p.depend(r.target),i},set:function(e){i=u(e,t),p.notify()}})}return n?o:t},m=function(e,t,n){const o=e.computed,l=e.templates,i=e.props||[],c=e.components||[],s=e.data&&e.data()||{};let f={};return f.render=d,f.bindPropToTemplate=a,f.name=e.name,f.el=e.el,u(s,f),function(e,t){let n={},o={};for(let l in t){let i=null;n[l]=new p("Computed watcher prop: "+l,function(){i=t[l].apply(e),o[l].notify()},null),r.target=n[l],i=t[l].apply(e),r.target=null,o[l]=new r(l),Object.defineProperty(e,l,{get:function(){return r.target&&(o[l].depend(r.target),r.target=null),i}})}}(f,o),function(e,t,n,o){for(let l of t){let t=new r(l);Object.defineProperty(e,l,{get:function(){return r.target&&t.depend(r.target),o[n[l]]}})}}(f,i,t,n),function(e,t){for(let n of t)e.bindPropToTemplate(n.html,n.id,n.prop),e.render(n.html,n.id,e.el)}(f,l),function(e,t){for(let n of t){let t=n.template(),o=n.name,l=n.value;l.templates;if(-1===t.indexOf(o)){console.warn(`${o} not defined in the template`);break}{let n=t.split("</"+o+">")[0].split("data-"),i={};for(let e of n)if(-1!==e.indexOf("=")){let t=e.split("=");i[t[0]]=t[1].split('"')[1]}console.log("propValueHash:"+JSON.stringify(i)),m(l,i,e)}}}(f,c),f};var s={templateForA:function(){return`<p>Hello, I am a <i>data</i> prop. You can call me <strong>A</strong>: ${this.a}</p>`},templateForB:function(){return`<p>Hello, I am a <i>computed</i> prop. You can call me <strong>B</strong> (A * 10): ${this.b}</p>`},templateForC:function(){return`<p>Hello, I am a <i>data</i> prop. You can call me <strong>C</strong>: ${this.c}</p>`},templateForD:function(){return`<p>Hello, I am a <i>computed</i> prop. You can call me <strong>D</strong> (B + 11): ${this.d}</p>`},templateForF:function(){return`<p>Hello, I am a <i>nested data</i> prop. You can call me <strong>F</strong>(Length): ${this.e.f}</p>`},templateForG:function(){return`<p>Hello, I am a <i>nested data</i> prop. You can call me <strong>G</strong>(Width): ${this.e.g}</p>`},templateForH:function(){return`<p>Hello, I am a <i>nested computed</i> prop. You can call me <strong>H</strong>(Area): ${this.nestedComputed}</p>`},templateAForComponentB:function(){return`<p>I'm a child component I have inherited my parent's property a: ${this.a1}</p>`},templateBForComponentB:function(){return`<p>I'm a child component. This is my property B1: ${this.b1}</p>`},templateForChildComponentPlaceholder:function(){return'<my-child-component data-a1="a"></my-child-component>'}};const f={name:"componentOne",data:()=>({a:5,c:"Hello there!!",e:{f:5,g:6}}),computed:{b:function(){return 10*this.a},d:function(){return this.b+11},nestedComputed:function(){return isNaN(this.e.f)||isNaN(this.e.g)?0:this.e.f*this.e.g}},el:"componentOne",templates:[{html:s.templateForA,id:"a",prop:"a"},{html:s.templateForB,id:"b",prop:"b"},{html:s.templateForC,id:"c",prop:"c"},{html:s.templateForD,id:"d",prop:"d"},{html:s.templateForF,id:"f",prop:"e.f"},{html:s.templateForG,id:"g",prop:"e.g"},{html:s.templateForH,id:"h",prop:"nestedComputed"}],components:[{name:"my-child-component",value:{name:"childComponent",el:"childComponent",props:["a1"],data:()=>({b1:10}),templates:[{html:s.templateAForComponentB,id:"child_a",prop:"a1"},{html:s.templateBForComponentB,id:"child_b",prop:"b1"}]},template:s.templateForChildComponentPlaceholder}]};function h(){let e=document.getElementById("logs"),t=document.getElementById("noLogs");t?t.innerText="no logs...":((t=document.createElement("p")).id="noLogs",t.innerText="no logs...",e.appendChild(t))}document.getElementById("inputA").onchange=function(e){let t=document.getElementById("inputA").value;isNaN(t)||(g.a=t)},document.getElementById("inputC").onchange=function(e){let t=document.getElementById("inputC").value;g.c=t},document.getElementById("inputF").onchange=function(e){let t=document.getElementById("inputF").value;g.e.f=t},document.getElementById("inputG").onchange=function(e){let t=document.getElementById("inputG").value;g.e.g=t},document.getElementById("clearLogs").onclick=function(e){let t=document.getElementById("logs");for(;t.hasChildNodes()&&"Dependency Tracker"!=t.lastChild.innerText;)t.removeChild(t.lastChild);h()},h();let g=m(f);console.log(g),setTimeout(()=>{g.c="hello Chicago!!"},2e3)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9SZWFjdGl2aXR5L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL1JlYWN0aXZpdHkvLi9nbG9iYWxzLmpzIiwid2VicGFjazovL1JlYWN0aXZpdHkvLi91dGlscy5qcyIsIndlYnBhY2s6Ly9SZWFjdGl2aXR5Ly4vcmVhY3RpdmUvZGVwLmpzIiwid2VicGFjazovL1JlYWN0aXZpdHkvLi9yZWFjdGl2ZS93YXRjaGVyLmpzIiwid2VicGFjazovL1JlYWN0aXZpdHkvLi9yZWFjdGl2ZS9iaW5kUHJvcC5qcyIsIndlYnBhY2s6Ly9SZWFjdGl2aXR5Ly4vcmVuZGVyLmpzIiwid2VicGFjazovL1JlYWN0aXZpdHkvLi9yZWFjdGl2ZS9vYnNlcnZlci5qcyIsIndlYnBhY2s6Ly9SZWFjdGl2aXR5Ly4vdGVtcGxhdGVzLmpzIiwid2VicGFjazovL1JlYWN0aXZpdHkvLi9jb21wb25lbnRzLmpzIiwid2VicGFjazovL1JlYWN0aXZpdHkvLi90ZXN0LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsInZhbHVlIiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnbG9iYWxXYXRjaGVyQ291bnQiLCJnbG9iYWxEZXBUcmFja2VyQ291bnQiLCJsb2dnZXIiLCJbb2JqZWN0IE9iamVjdF0iLCJtc2ciLCJub0xvZ3MiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaW5uZXJUZXh0IiwiY3JlYXRlRWxlbWVudCIsImlkIiwiYXBwZW5kQ2hpbGQiLCJEZXAiLCJ0aGlzIiwic3Vic2NyaWJlcnMiLCJTZXQiLCJkZXBlbmQiLCJhZGQiLCJub3RpZnkiLCJpbmZvIiwidXBkYXRlIiwidGFyZ2V0IiwiV2F0Y2hlciIsImNiIiwidm0iLCJhcmdzIiwiYXBwbHkiLCJiaW5kUHJvcFRvVGVtcGxhdGUiLCJ0ZW1wbGF0ZSIsInByb3AiLCJjb21wb25lbnRJZCIsImNvbnNvbGUiLCJsb2ciLCJyZW5kZXIiLCJpbmRleE9mIiwicHJvcHMiLCJfcHJvcHMiLCJzcGxpdCIsImxlbmd0aCIsInRyYXZlcnNlVG9Qcm9wIiwiaGlnaGxpZ2h0IiwiY2xhc3NOYW1lIiwiZWwiLCJ0aW1lb3V0IiwiY2xhc3NMaXN0Iiwic2V0VGltZW91dCIsInJlbW92ZSIsImlubmVySFRNTCIsImNvbXBvbmVudFJvb3QiLCJpbml0RGF0YSIsIm9iaiIsInJlYWN0aXZlIiwibmVzdGVkIiwid3JhcHBlciIsInZhbCIsImRlcCIsInNldCIsIm5ld1ZhbCIsIm1ha2VSZWFjdGl2ZSIsInByb3BWYWx1ZUhhc2giLCJwYXJlbnQiLCJjb21wdXRlZCIsInRlbXBsYXRlcyIsImNvbXBvbmVudHMiLCJkYXRhIiwiY29tcHV0ZWRXYXRjaGVycyIsImNvbXB1dGVkRGVwcyIsImNhY2hlZFZhbHVlIiwiaW5pdENvbXB1dGVkIiwiaW5pdFByb3BzIiwiaHRtbCIsImluaXRUZW1wbGF0ZXMiLCJjb21wb25lbnQiLCJ3YXJuIiwiYXR0cnMiLCJhdHRyIiwia3ZwIiwiSlNPTiIsInN0cmluZ2lmeSIsImluaXRDb21wb25lbnRzIiwidGVtcGxhdGVzXzAiLCJ0ZW1wbGF0ZUZvckEiLCJhIiwidGVtcGxhdGVGb3JCIiwiYiIsInRlbXBsYXRlRm9yQyIsInRlbXBsYXRlRm9yRCIsInRlbXBsYXRlRm9yRiIsImUiLCJmIiwidGVtcGxhdGVGb3JHIiwiZyIsInRlbXBsYXRlRm9ySCIsIm5lc3RlZENvbXB1dGVkIiwidGVtcGxhdGVBRm9yQ29tcG9uZW50QiIsImExIiwidGVtcGxhdGVCRm9yQ29tcG9uZW50QiIsImIxIiwidGVtcGxhdGVGb3JDaGlsZENvbXBvbmVudFBsYWNlaG9sZGVyIiwiY29tcG9uZW50T25lIiwiaXNOYU4iLCJpbml0TG9ncyIsImxvZ3MiLCJvbmNoYW5nZSIsIm15Rmlyc3RSZWFjdGl2ZUNvbXBvbmVudCIsIm9uY2xpY2siLCJoYXNDaGlsZE5vZGVzIiwibGFzdENoaWxkIiwicmVtb3ZlQ2hpbGQiXSwibWFwcGluZ3MiOiIyQkFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBMkNBLE9BdENBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEdBQ0FLLGNBQUEsRUFDQUMsWUFBQSxFQUNBQyxJQUFBTixLQU1BWixFQUFBbUIsRUFBQSxTQUFBakIsR0FDQVksT0FBQUMsZUFBQWIsRUFBQSxjQUFpRGtCLE9BQUEsS0FJakRwQixFQUFBcUIsRUFBQSxTQUFBbEIsR0FDQSxJQUFBUyxFQUFBVCxLQUFBbUIsV0FDQSxXQUEyQixPQUFBbkIsRUFBQSxTQUMzQixXQUFpQyxPQUFBQSxHQUVqQyxPQURBSCxFQUFBVSxFQUFBRSxFQUFBLElBQUFBLEdBQ0FBLEdBSUFaLEVBQUFhLEVBQUEsU0FBQVUsRUFBQUMsR0FBc0QsT0FBQVYsT0FBQVcsVUFBQUMsZUFBQW5CLEtBQUFnQixFQUFBQyxJQUd0RHhCLEVBQUEyQixFQUFBLElBSUEzQixJQUFBNEIsRUFBQSx5Q0NsRUEsSUFBQUMsRUFBQSxFQUNBQyxFQUFBLEVDREEsTUFXQUMs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Y0FBQSxNQUNBQyxHQUFBLFNBQ0FMLEVBQUFHLFVBTkEsYUFPQThGLEVBQUEzRixZQUFBTixJQXpDQUMsU0FBQUMsZUFBQSxVQUFBZ0csU0FOQSxTQUFBZixHQUNBLElBQUFsQyxFQUFBaEQsU0FBQUMsZUFBQSxVQUFBaEIsTUFDQTZHLE1BQUE5QyxLQUNBa0QsRUFBQXRCLEVBQUE1QixJQVNBaEQsU0FBQUMsZUFBQSxVQUFBZ0csU0FKQSxTQUFBZixHQUNBLElBQUFsQyxFQUFBaEQsU0FBQUMsZUFBQSxVQUFBaEIsTUFDQWlILEVBQUE1SCxFQUFBMEUsR0FRQWhELFNBQUFDLGVBQUEsVUFBQWdHLFNBSkEsU0FBQWYsR0FDQSxJQUFBbEMsRUFBQWhELFNBQUFDLGVBQUEsVUFBQWhCLE1BQ0FpSCxFQUFBaEIsRUFBQUMsRUFBQW5DLEdBUUFoRCxTQUFBQyxlQUFBLFVBQUFnRyxTQUpBLFNBQUFmLEdBQ0EsSUFBQWxDLEVBQUFoRCxTQUFBQyxlQUFBLFVBQUFoQixNQUNBaUgsRUFBQWhCLEVBQUFHLEVBQUFyQyxHQWVBaEQsU0FBQUMsZUFBQSxhQUFBa0csUUFYQSxTQUFBakIsR0FDQSxJQUFBYyxFQUFBaEcsU0FBQUMsZUFBQSxRQUNBLEtBQUErRixFQUFBSSxpQkFFQSxzQkFEQUosRUFBQUssVUFDQW5HLFdBR0E4RixFQUFBTSxZQUFBTixFQUFBSyxXQUVBTixLQWlCQUEsSUFDQSxJQUFBRyxFQUFBOUMsRUFBQXlDLEdBQ0FwRSxRQUFBQyxJQUFBd0UsR0FDQTNELFdBQUEsS0FDQTJELEVBQUE1SCxFQUFBLG1CQUNDIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9cIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiLy9HbG9iYWwgdmFyaWFibGVzXHJcbmxldCBnbG9iYWxXYXRjaGVyQ291bnQgPSAwXHJcbmxldCBnbG9iYWxEZXBUcmFja2VyQ291bnQgPSAwXHJcbmV4cG9ydCB7Z2xvYmFsV2F0Y2hlckNvdW50LCBnbG9iYWxEZXBUcmFja2VyQ291bnR9IiwiLy9UcmF2ZXJzZSB0byB0aGUgbmVzdGVkIHByb3BcclxuY29uc3QgdHJhdmVyc2VUb1Byb3AgPSAodGFyZ2V0LCBwcm9wcykgPT4ge1xyXG4gICAgbGV0IF9wcm9wcyA9IHByb3BzLnNwbGl0KCcuJylcclxuICAgIGNvbnNvbGUubG9nKF9wcm9wcylcclxuICAgIGxldCB2YWwgPSB7fVxyXG4gICAgbGV0IG8gPSB0YXJnZXRbX3Byb3BzWzBdXVxyXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBfcHJvcHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgbyA9IG9bX3Byb3BzW2ldXVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9cclxuICB9XHJcbiAvLyBMb2dnZXIgdG8gbG9nIGRlcGVuZGVuY3kgbm90aWZpY2F0aW9uc1xyXG4gIGNvbnN0IGxvZ2dlciA9IHtcclxuICAgIGluZm8gKG1zZykge1xyXG4gICAgICBsZXQgbm9Mb2dzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25vTG9ncycpXHJcbiAgICAgIGlmKG5vTG9ncyAmJiBub0xvZ3MuaW5uZXJUZXh0ICE9PSAnJykge1xyXG4gICAgICAgIG5vTG9ncy5pbm5lclRleHQgPSAnJ1xyXG4gICAgICB9XHJcbiAgICAgIGxldCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpXHJcbiAgICAgIHAuaWQgPSAnbG9nVGV4dCdcclxuICAgICAgcC5pbm5lclRleHQgPSBtc2dcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ3MnKS5hcHBlbmRDaGlsZChwKVxyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBleHBvcnQge3RyYXZlcnNlVG9Qcm9wLCBsb2dnZXJ9XHJcbiBcclxuICAiLCIgaW1wb3J0IHtnbG9iYWxEZXBUcmFja2VyQ291bnR9IGZyb20gJy4uL2dsb2JhbHMuanMnXHJcbiBpbXBvcnQge2xvZ2dlcn0gZnJvbSAnLi4vdXRpbHMuanMnXHJcbiAvL0RlcGVuZGVuY3kgVHJhY2tlciwgbWFpbnRhaW5zIGEgbGlzdCBvZiBzdWJzY3JpYmVycywgYW5kIGFuIGFjdGl2ZSB0YXJnZXQgKGNhbiBvbmx5IGJlIG9uZSBhdCBhbnkgcG9pbnQgaW4gdGltZSlcclxuY29uc3QgRGVwID0gZnVuY3Rpb24obmFtZSkge1xyXG4gIHRoaXMuc3Vic2NyaWJlcnMgPSBuZXcgU2V0KClcclxuICB0aGlzLmRlcGVuZCA9IGZ1bmN0aW9uKHMpIHtcclxuICAgICAgdGhpcy5zdWJzY3JpYmVycy5hZGQocylcclxuICB9XHJcbiAgdGhpcy5ub3RpZnkgPSBmdW5jdGlvbigpIHtcclxuICAgIGZvciAobGV0IHMgb2YgdGhpcy5zdWJzY3JpYmVycyl7XHJcbiAgICAgIGxvZ2dlci5pbmZvKHRoaXMubmFtZSArICcgbm90aWZ5aW5nICcgKyBzLm5hbWUpXHJcbiAgICAgIHMudXBkYXRlKClcclxuICAgIH1cclxuICB9XHJcbiAgdGhpcy5pZCA9IGdsb2JhbERlcFRyYWNrZXJDb3VudCsrXHJcbiAgdGhpcy5uYW1lID0gbmFtZVxyXG59XHJcbkRlcC50YXJnZXQgPSBudWxsXHJcbmV4cG9ydCB7RGVwfVxyXG4iLCJpbXBvcnQge2dsb2JhbFdhdGNoZXJDb3VudH0gZnJvbSAnLi4vZ2xvYmFscy5qcydcclxuLy9XYXRjaGVyIC0gYXR0YWNoZXMgYXMgYW4gYWN0aXZlIGRlcCB0YXJnZXQsIGZpcmVzIHRoZSB1cGRhdGUgY2FsbGJhY2tcclxuZXhwb3J0IGNvbnN0IFdhdGNoZXIgPSBmdW5jdGlvbihuYW1lLCBjYiwgdm0sIC4uLmFyZ3MpIHtcclxuICAgIHRoaXMudXBkYXRlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIGNiLmFwcGx5KHZtLCBhcmdzKVxyXG4gICAgfVxyXG4gICAgdGhpcy5pZCA9IGdsb2JhbFdhdGNoZXJDb3VudCsrXHJcbiAgICB0aGlzLm5hbWUgPSBuYW1lXHJcbn0iLCIgIGltcG9ydCB7RGVwfSBmcm9tICcuL2RlcC5qcydcclxuICBpbXBvcnQge1dhdGNoZXJ9IGZyb20gJy4vd2F0Y2hlci5qcydcclxuICBpbXBvcnQge3RyYXZlcnNlVG9Qcm9wfSBmcm9tICcuLi91dGlscy5qcydcclxuXHJcbiAgLy9GbiB0byBiaW5kIGNvbXBvbmVudCdzIHByb3BzIHRvIGh0bWwgdGVtcGxhdGVcclxuICBleHBvcnQgY29uc3QgYmluZFByb3BUb1RlbXBsYXRlID0gZnVuY3Rpb24odGVtcGxhdGUsIGlkLCBwcm9wLCBjb21wb25lbnRJZCkge1xyXG4gICAgY29uc29sZS5sb2coXCJiaW5kUHJvcFRvVGVtcGxhdGU6XCIgKyBpZCArIFwiOlwiICsgdGhpc1twcm9wXSlcclxuICAgIERlcC50YXJnZXQgPSBuZXcgV2F0Y2hlcignQmluZGluZyBwcm9wIFdhdGNoZXI6ICcgKyBpZCwgdGhpcy5yZW5kZXIsIHRoaXMsIHRlbXBsYXRlLCBpZCwgY29tcG9uZW50SWQpXHJcbiAgICBsZXQgdmFsID0gdHlwZW9mKHRoaXNbcHJvcF0pID09PSBcImZ1bmN0aW9uXCIgPyB0aGlzW3Byb3BdLmFwcGx5KHRoaXMpIDogcHJvcC5pbmRleE9mKCcuJykgIT09IC0xID8gdHJhdmVyc2VUb1Byb3AodGhpcywgcHJvcCkgOiB0aGlzW3Byb3BdXHJcbiAgICBEZXAudGFyZ2V0ID0gbnVsbFxyXG4gIH0iLCJjb25zdCBoaWdobGlnaHQgPSAoY2xhc3NOYW1lLCBlbCwgdGltZW91dCkgPT4ge1xyXG4gICAgZWwuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSlcclxuICAgIH0sIHRpbWVvdXQpXHJcbn1cclxuXHJcbi8vb25seSB0aGlzIGd1eSBzaG91bGQgdG91Y2ggdGhlIERPTSwga2lkZGluZyBub3RcclxuZXhwb3J0IGNvbnN0IHJlbmRlciA9IGZ1bmN0aW9uICh0ZW1wbGF0ZSwgaWQsIGNvbXBvbmVudElkKSB7XHJcbiAgICBsZXQgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZClcclxuICAgIGlmICghZWwpIHtcclxuICAgICAgICBsZXQgY29tcG9uZW50Um9vdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbXBvbmVudElkKVxyXG4gICAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICBlbC5pZCA9IGlkXHJcbiAgICAgICAgZWwuaW5uZXJIVE1MID0gdGVtcGxhdGUuYXBwbHkodGhpcylcclxuICAgICAgICBjb21wb25lbnRSb290LmFwcGVuZENoaWxkKGVsKVxyXG4gICAgICAgIGhpZ2hsaWdodCgnaW5pdFByb3BzJywgZWwsIDEwMDApXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBlbC5pbm5lckhUTUwgPSB0ZW1wbGF0ZS5hcHBseSh0aGlzKVxyXG4gICAgICBoaWdobGlnaHQoJ2FjdGl2ZVByb3BzJywgZWwsIDMwMDApXHJcbiAgICB9XHJcbn1cclxuXHJcbiIsIlxyXG5pbXBvcnQgeyBEZXAgfSBmcm9tICcuL2RlcC5qcydcclxuaW1wb3J0IHsgV2F0Y2hlciB9IGZyb20gJy4vd2F0Y2hlci5qcydcclxuaW1wb3J0IHsgYmluZFByb3BUb1RlbXBsYXRlIH0gZnJvbSAnLi9iaW5kUHJvcC5qcydcclxuaW1wb3J0IHsgcmVuZGVyIH0gZnJvbSAnLi4vcmVuZGVyLmpzJ1xyXG5cclxuY29uc3QgaW5pdERhdGEgPSBmdW5jdGlvbiAob2JqLCByZWFjdGl2ZSwgbmVzdGVkKSB7XHJcbiAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnKSB7XHJcbiAgICByZXR1cm4gb2JqXHJcbiAgfVxyXG4gIGxldCB3cmFwcGVyID0ge31cclxuXHJcbiAgZm9yIChsZXQgcHJvcCBpbiBvYmopIHtcclxuICAgIGxldCB2YWwgPSBvYmpbcHJvcF1cclxuICAgIGlmICh0eXBlb2Ygb2JqW3Byb3BdID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgIHZhbCA9IGluaXREYXRhKG9ialtwcm9wXSwgcmVhY3RpdmUsIHRydWUpXHJcbiAgICB9XHJcbiAgICBsZXQgZGVwID0gbmV3IERlcChwcm9wKVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5lc3RlZCA/IHdyYXBwZXIgOiByZWFjdGl2ZSwgcHJvcCwge1xyXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoRGVwLnRhcmdldCkge1xyXG4gICAgICAgICAgZGVwLmRlcGVuZChEZXAudGFyZ2V0KVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdmFsXHJcbiAgICAgIH0sXHJcbiAgICAgIHNldDogZnVuY3Rpb24gKG5ld1ZhbCkge1xyXG4gICAgICAgIHZhbCA9IGluaXREYXRhKG5ld1ZhbCwgcmVhY3RpdmUpXHJcbiAgICAgICAgZGVwLm5vdGlmeSgpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG4gIHJldHVybiBuZXN0ZWQgPyB3cmFwcGVyIDogcmVhY3RpdmVcclxufVxyXG5cclxuY29uc3QgbWFrZVJlYWN0aXZlID0gZnVuY3Rpb24gKHZtLCBwcm9wVmFsdWVIYXNoLCBwYXJlbnQpIHtcclxuICBjb25zdCBjb21wdXRlZCA9IHZtLmNvbXB1dGVkXHJcbiAgY29uc3QgdGVtcGxhdGVzID0gdm0udGVtcGxhdGVzXHJcbiAgY29uc3QgcHJvcHMgPSB2bS5wcm9wcyB8fCBbXVxyXG4gIGNvbnN0IGNvbXBvbmVudHMgPSB2bS5jb21wb25lbnRzIHx8IFtdXHJcbiAgY29uc3QgZGF0YSA9ICh2bS5kYXRhICYmIHZtLmRhdGEoKSkgfHwge31cclxuICBsZXQgcmVhY3RpdmUgPSB7fVxyXG5cclxuICByZWFjdGl2ZS5yZW5kZXIgPSByZW5kZXJcclxuICByZWFjdGl2ZS5iaW5kUHJvcFRvVGVtcGxhdGUgPSBiaW5kUHJvcFRvVGVtcGxhdGVcclxuICByZWFjdGl2ZS5uYW1lID0gdm0ubmFtZVxyXG4gIHJlYWN0aXZlLmVsID0gdm0uZWxcclxuICBcclxuICBpbml0RGF0YShkYXRhLCByZWFjdGl2ZSlcclxuXHJcbiAgaW5pdENvbXB1dGVkKHJlYWN0aXZlLCBjb21wdXRlZClcclxuXHJcbiAgaW5pdFByb3BzKHJlYWN0aXZlLCBwcm9wcywgcHJvcFZhbHVlSGFzaCwgcGFyZW50KVxyXG5cclxuICBpbml0VGVtcGxhdGVzKHJlYWN0aXZlLCB0ZW1wbGF0ZXMpXHJcblxyXG4gIGluaXRDb21wb25lbnRzKHJlYWN0aXZlLCBjb21wb25lbnRzKVxyXG5cclxuICByZXR1cm4gcmVhY3RpdmVcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdENvbXB1dGVkKHJlYWN0aXZlLCBjb21wdXRlZCkge1xyXG4gIGxldCBjb21wdXRlZFdhdGNoZXJzID0ge31cclxuICBsZXQgY29tcHV0ZWREZXBzID0ge31cclxuXHJcbiAgLy9SZWFjdGl2ZSBjb21wdXRlZCBwcm9wc1xyXG4gIGZvciAobGV0IHByb3AgaW4gY29tcHV0ZWQpIHtcclxuICAgIGxldCBjYWNoZWRWYWx1ZSA9IG51bGxcclxuICAgIC8vQ29tcHV0ZWQgcHJvcGVydGllcyBnZXRzIHRoZWlyIG93biB3YXRjaGVycyB3aGljaCByZWNvbXB1dGUgdGhlIGZuIGFuZCBub3RpZnkgaXRzIGRlcGVuZGVudHNcclxuICAgIGNvbXB1dGVkV2F0Y2hlcnNbcHJvcF0gPSBuZXcgV2F0Y2hlcignQ29tcHV0ZWQgd2F0Y2hlciBwcm9wOiAnICsgcHJvcCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICBjYWNoZWRWYWx1ZSA9IGNvbXB1dGVkW3Byb3BdLmFwcGx5KHJlYWN0aXZlKVxyXG4gICAgICBjb21wdXRlZERlcHNbcHJvcF0ubm90aWZ5KClcclxuICAgIH0sIG51bGwpXHJcblxyXG4gICAgRGVwLnRhcmdldCA9IGNvbXB1dGVkV2F0Y2hlcnNbcHJvcF1cclxuICAgIGNhY2hlZFZhbHVlID0gY29tcHV0ZWRbcHJvcF0uYXBwbHkocmVhY3RpdmUpXHJcbiAgICBEZXAudGFyZ2V0ID0gbnVsbFxyXG5cclxuICAgIGNvbXB1dGVkRGVwc1twcm9wXSA9IG5ldyBEZXAocHJvcClcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZWFjdGl2ZSwgcHJvcCwge1xyXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoRGVwLnRhcmdldCkge1xyXG4gICAgICAgICAgY29tcHV0ZWREZXBzW3Byb3BdLmRlcGVuZChEZXAudGFyZ2V0KVxyXG4gICAgICAgICAgRGVwLnRhcmdldCA9IG51bGxcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNhY2hlZFZhbHVlXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBpbml0UHJvcHMocmVhY3RpdmUsIHByb3BzLCBwcm9wVmFsdWVIYXNoLCBwYXJlbnQpIHtcclxuICBmb3IgKGxldCBwcm9wIG9mIHByb3BzKSB7XHJcbiAgICBsZXQgZGVwID0gbmV3IERlcChwcm9wKVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJlYWN0aXZlLCBwcm9wLCB7XHJcbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChEZXAudGFyZ2V0KSB7XHJcbiAgICAgICAgICBkZXAuZGVwZW5kKERlcC50YXJnZXQpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwYXJlbnRbcHJvcFZhbHVlSGFzaFtwcm9wXV1cclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluaXRUZW1wbGF0ZXMocmVhY3RpdmUsIHRlbXBsYXRlcykge1xyXG4gIGZvciAobGV0IHRlbXBsYXRlIG9mIHRlbXBsYXRlcykge1xyXG4gICAgcmVhY3RpdmUuYmluZFByb3BUb1RlbXBsYXRlKHRlbXBsYXRlLmh0bWwsIHRlbXBsYXRlLmlkLCB0ZW1wbGF0ZS5wcm9wKVxyXG4gICAgcmVhY3RpdmUucmVuZGVyKHRlbXBsYXRlLmh0bWwsIHRlbXBsYXRlLmlkLCByZWFjdGl2ZS5lbClcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluaXRDb21wb25lbnRzKHJlYWN0aXZlLCBjb21wb25lbnRzKSB7XHJcbiAgZm9yIChsZXQgY29tcG9uZW50IG9mIGNvbXBvbmVudHMpIHtcclxuICAgIGxldCB0ZW1wbGF0ZSA9IGNvbXBvbmVudC50ZW1wbGF0ZSgpXHJcbiAgICBsZXQgbmFtZSA9IGNvbXBvbmVudC5uYW1lXHJcbiAgICBsZXQgdmFsdWUgPSBjb21wb25lbnQudmFsdWVcclxuICAgIGxldCBjaGlsZFRlbXBsYXRlcyA9IHZhbHVlLnRlbXBsYXRlc1xyXG4gICAgaWYgKHRlbXBsYXRlLmluZGV4T2YobmFtZSkgPT09IC0xKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybihgJHtuYW1lfSBub3QgZGVmaW5lZCBpbiB0aGUgdGVtcGxhdGVgKVxyXG4gICAgICBicmVha1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbGV0IGF0dHJzID0gdGVtcGxhdGUuc3BsaXQoJzwvJyArIG5hbWUgKyAnPicpWzBdLnNwbGl0KCdkYXRhLScpXHJcbiAgICAgIGxldCBwcm9wVmFsdWVIYXNoID0ge31cclxuICAgICAgZm9yIChsZXQgYXR0ciBvZiBhdHRycykge1xyXG4gICAgICAgIGlmIChhdHRyLmluZGV4T2YoJz0nKSAhPT0gLTEpIHtcclxuICAgICAgICAgIGxldCBrdnAgPSBhdHRyLnNwbGl0KCc9JylcclxuICAgICAgICAgIHByb3BWYWx1ZUhhc2hba3ZwWzBdXSA9IGt2cFsxXS5zcGxpdCgnXCInKVsxXVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBjb25zb2xlLmxvZygncHJvcFZhbHVlSGFzaDonICsgSlNPTi5zdHJpbmdpZnkocHJvcFZhbHVlSGFzaCkpXHJcbiAgICAgIG1ha2VSZWFjdGl2ZSh2YWx1ZSwgcHJvcFZhbHVlSGFzaCwgcmVhY3RpdmUpXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBtYWtlUmVhY3RpdmUgfVxyXG5cclxuIiwiXHJcbmxldCB0ZW1wbGF0ZUZvckEgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBgPHA+SGVsbG8sIEkgYW0gYSA8aT5kYXRhPC9pPiBwcm9wLiBZb3UgY2FuIGNhbGwgbWUgPHN0cm9uZz5BPC9zdHJvbmc+OiAke3RoaXMuYX08L3A+YFxyXG4gIH1cclxuICBcclxuICBsZXQgdGVtcGxhdGVGb3JCID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gYDxwPkhlbGxvLCBJIGFtIGEgPGk+Y29tcHV0ZWQ8L2k+IHByb3AuIFlvdSBjYW4gY2FsbCBtZSA8c3Ryb25nPkI8L3N0cm9uZz4gKEEgKiAxMCk6ICR7dGhpcy5ifTwvcD5gXHJcbiAgfVxyXG4gIFxyXG4gIGxldCB0ZW1wbGF0ZUZvckMgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBgPHA+SGVsbG8sIEkgYW0gYSA8aT5kYXRhPC9pPiBwcm9wLiBZb3UgY2FuIGNhbGwgbWUgPHN0cm9uZz5DPC9zdHJvbmc+OiAke3RoaXMuY308L3A+YFxyXG4gIH1cclxuICBcclxuICBsZXQgdGVtcGxhdGVGb3JEID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gYDxwPkhlbGxvLCBJIGFtIGEgPGk+Y29tcHV0ZWQ8L2k+IHByb3AuIFlvdSBjYW4gY2FsbCBtZSA8c3Ryb25nPkQ8L3N0cm9uZz4gKEIgKyAxMSk6ICR7dGhpcy5kfTwvcD5gXHJcbiAgfVxyXG4gIFxyXG4gIFxyXG4gIGxldCB0ZW1wbGF0ZUZvckYgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBgPHA+SGVsbG8sIEkgYW0gYSA8aT5uZXN0ZWQgZGF0YTwvaT4gcHJvcC4gWW91IGNhbiBjYWxsIG1lIDxzdHJvbmc+Rjwvc3Ryb25nPihMZW5ndGgpOiAke3RoaXMuZS5mfTwvcD5gXHJcbiAgfVxyXG4gIFxyXG4gIGxldCB0ZW1wbGF0ZUZvckcgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBgPHA+SGVsbG8sIEkgYW0gYSA8aT5uZXN0ZWQgZGF0YTwvaT4gcHJvcC4gWW91IGNhbiBjYWxsIG1lIDxzdHJvbmc+Rzwvc3Ryb25nPihXaWR0aCk6ICR7dGhpcy5lLmd9PC9wPmBcclxuICB9XHJcbiAgXHJcbiAgbGV0IHRlbXBsYXRlRm9ySCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIGA8cD5IZWxsbywgSSBhbSBhIDxpPm5lc3RlZCBjb21wdXRlZDwvaT4gcHJvcC4gWW91IGNhbiBjYWxsIG1lIDxzdHJvbmc+SDwvc3Ryb25nPihBcmVhKTogJHt0aGlzLm5lc3RlZENvbXB1dGVkfTwvcD5gXHJcbiAgfVxyXG4gIFxyXG4gIGxldCB0ZW1wbGF0ZUFGb3JDb21wb25lbnRCID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gYDxwPkknbSBhIGNoaWxkIGNvbXBvbmVudCBJIGhhdmUgaW5oZXJpdGVkIG15IHBhcmVudCdzIHByb3BlcnR5IGE6ICR7dGhpcy5hMX08L3A+YFxyXG4gIH1cclxuICBcclxuICBsZXQgdGVtcGxhdGVCRm9yQ29tcG9uZW50QiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIGA8cD5JJ20gYSBjaGlsZCBjb21wb25lbnQuIFRoaXMgaXMgbXkgcHJvcGVydHkgQjE6ICR7dGhpcy5iMX08L3A+YFxyXG4gIH1cclxuICBcclxuICBsZXQgdGVtcGxhdGVGb3JDaGlsZENvbXBvbmVudFBsYWNlaG9sZGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gYDxteS1jaGlsZC1jb21wb25lbnQgZGF0YS1hMT1cImFcIj48L215LWNoaWxkLWNvbXBvbmVudD5gXHJcbiAgfVxyXG5cclxuICBleHBvcnQgZGVmYXVsdCB7XHJcbiAgICAgIHRlbXBsYXRlRm9yQSxcclxuICAgICAgdGVtcGxhdGVGb3JCLFxyXG4gICAgICB0ZW1wbGF0ZUZvckMsXHJcbiAgICAgIHRlbXBsYXRlRm9yRCxcclxuICAgICAgdGVtcGxhdGVGb3JGLFxyXG4gICAgICB0ZW1wbGF0ZUZvckcsXHJcbiAgICAgIHRlbXBsYXRlRm9ySCxcclxuICAgICAgdGVtcGxhdGVBRm9yQ29tcG9uZW50QixcclxuICAgICAgdGVtcGxhdGVCRm9yQ29tcG9uZW50QixcclxuICAgICAgdGVtcGxhdGVGb3JDaGlsZENvbXBvbmVudFBsYWNlaG9sZGVyXHJcbiAgfSIsIi8vQ29tcG9uZW50IERlZmluaXRpb25zXHJcbmltcG9ydCB0ZW1wIGZyb20gJy4vdGVtcGxhdGVzLmpzJ1xyXG5jb25zdCBjaGlsZENvbXBvbmVudCA9IHtcclxuICAgIG5hbWU6ICdjaGlsZENvbXBvbmVudCcsXHJcbiAgICBlbDogJ2NoaWxkQ29tcG9uZW50JyxcclxuICAgIHByb3BzOiBbJ2ExJ10sXHJcbiAgICBkYXRhKCkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGIxOiAxMFxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgdGVtcGxhdGVzOiBbe1xyXG4gICAgICAgIGh0bWw6IHRlbXAudGVtcGxhdGVBRm9yQ29tcG9uZW50QixcclxuICAgICAgICBpZDogXCJjaGlsZF9hXCIsXHJcbiAgICAgICAgcHJvcDogXCJhMVwiXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBodG1sOiB0ZW1wLnRlbXBsYXRlQkZvckNvbXBvbmVudEIsXHJcbiAgICAgICAgaWQ6IFwiY2hpbGRfYlwiLFxyXG4gICAgICAgIHByb3A6IFwiYjFcIlxyXG4gICAgICB9XHJcbiAgICBdXHJcbiAgfVxyXG4gIFxyXG4gIGNvbnN0IGNvbXBvbmVudE9uZSA9IHtcclxuICAgIG5hbWU6ICdjb21wb25lbnRPbmUnLFxyXG4gICAgZGF0YSgpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBhOiA1LFxyXG4gICAgICAgIGM6ICdIZWxsbyB0aGVyZSEhJyxcclxuICAgICAgICBlOiB7XHJcbiAgICAgICAgICBmOiA1LFxyXG4gICAgICAgICAgZzogNlxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGNvbXB1dGVkOiB7XHJcbiAgICAgIGI6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmEgKiAxMFxyXG4gICAgICB9LFxyXG4gICAgICBkOiBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iICsgMTFcclxuICAgICAgfSxcclxuICAgICAgbmVzdGVkQ29tcHV0ZWQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmIChpc05hTih0aGlzLmUuZikgfHwgaXNOYU4odGhpcy5lLmcpKSB7XHJcbiAgICAgICAgICByZXR1cm4gMFxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5lLmYgKiB0aGlzLmUuZ1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgZWw6ICdjb21wb25lbnRPbmUnLFxyXG4gICAgdGVtcGxhdGVzOiBbe1xyXG4gICAgICAgIGh0bWw6IHRlbXAudGVtcGxhdGVGb3JBLFxyXG4gICAgICAgIGlkOiBcImFcIixcclxuICAgICAgICBwcm9wOiBcImFcIlxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaHRtbDogdGVtcC50ZW1wbGF0ZUZvckIsXHJcbiAgICAgICAgaWQ6IFwiYlwiLFxyXG4gICAgICAgIHByb3A6IFwiYlwiXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBodG1sOiB0ZW1wLnRlbXBsYXRlRm9yQyxcclxuICAgICAgICBpZDogXCJjXCIsXHJcbiAgICAgICAgcHJvcDogXCJjXCJcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGh0bWw6IHRlbXAudGVtcGxhdGVGb3JELFxyXG4gICAgICAgIGlkOiBcImRcIixcclxuICAgICAgICBwcm9wOiBcImRcIlxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaHRtbDogdGVtcC50ZW1wbGF0ZUZvckYsXHJcbiAgICAgICAgaWQ6IFwiZlwiLFxyXG4gICAgICAgIHByb3A6IFwiZS5mXCJcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGh0bWw6IHRlbXAudGVtcGxhdGVGb3JHLFxyXG4gICAgICAgIGlkOiBcImdcIixcclxuICAgICAgICBwcm9wOiBcImUuZ1wiXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBodG1sOiB0ZW1wLnRlbXBsYXRlRm9ySCxcclxuICAgICAgICBpZDogXCJoXCIsXHJcbiAgICAgICAgcHJvcDogXCJuZXN0ZWRDb21wdXRlZFwiXHJcbiAgICAgIH1cclxuICAgIF0sXHJcbiAgICBjb21wb25lbnRzOiBbe1xyXG4gICAgICBuYW1lOiAnbXktY2hpbGQtY29tcG9uZW50JyxcclxuICAgICAgdmFsdWU6IGNoaWxkQ29tcG9uZW50LFxyXG4gICAgICB0ZW1wbGF0ZTogdGVtcC50ZW1wbGF0ZUZvckNoaWxkQ29tcG9uZW50UGxhY2Vob2xkZXJcclxuICAgIH1dXHJcbiAgfVxyXG5cclxuICBleHBvcnQge2NoaWxkQ29tcG9uZW50LCBjb21wb25lbnRPbmV9IiwiaW1wb3J0IHsgbWFrZVJlYWN0aXZlIH0gZnJvbSAnLi9yZWFjdGl2ZS9vYnNlcnZlci5qcydcclxuaW1wb3J0IHsgY29tcG9uZW50T25lIH0gZnJvbSAnLi9jb21wb25lbnRzLmpzJ1xyXG4vL0V2ZW50IGhhbmRsZXIgZm9yIGlucHV0IGNoYW5nZXNcclxuZnVuY3Rpb24gc2V0VmFsRm9yQShlKSB7XHJcbiAgICBsZXQgdmFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0QScpLnZhbHVlO1xyXG4gICAgaWYgKCFpc05hTih2YWwpKSB7XHJcbiAgICAgICAgbXlGaXJzdFJlYWN0aXZlQ29tcG9uZW50LmEgPSB2YWxcclxuICAgIH1cclxufVxyXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5wdXRBJykub25jaGFuZ2UgPSBzZXRWYWxGb3JBXHJcblxyXG5mdW5jdGlvbiBzZXRWYWxGb3JDKGUpIHtcclxuICAgIGxldCB2YWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5wdXRDJykudmFsdWU7XHJcbiAgICBteUZpcnN0UmVhY3RpdmVDb21wb25lbnQuYyA9IHZhbFxyXG59XHJcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dEMnKS5vbmNoYW5nZSA9IHNldFZhbEZvckNcclxuXHJcbmZ1bmN0aW9uIHNldFZhbEZvckYoZSkge1xyXG4gICAgbGV0IHZhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dEYnKS52YWx1ZTtcclxuICAgIG15Rmlyc3RSZWFjdGl2ZUNvbXBvbmVudC5lLmYgPSB2YWxcclxufVxyXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5wdXRGJykub25jaGFuZ2UgPSBzZXRWYWxGb3JGXHJcblxyXG5mdW5jdGlvbiBzZXRWYWxGb3JHKGUpIHtcclxuICAgIGxldCB2YWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5wdXRHJykudmFsdWU7XHJcbiAgICBteUZpcnN0UmVhY3RpdmVDb21wb25lbnQuZS5nID0gdmFsXHJcbn1cclxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0RycpLm9uY2hhbmdlID0gc2V0VmFsRm9yR1xyXG5cclxuZnVuY3Rpb24gY2xlYXJMb2dzKGUpIHtcclxuICBsZXQgbG9ncyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dzJylcclxuICB3aGlsZSAobG9ncy5oYXNDaGlsZE5vZGVzKCkpIHtcclxuICAgIGNvbnN0IGxhc3RMb2cgPSBsb2dzLmxhc3RDaGlsZFxyXG4gICAgaWYgKGxhc3RMb2cuaW5uZXJUZXh0ID09ICdEZXBlbmRlbmN5IFRyYWNrZXInKSB7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBsb2dzLnJlbW92ZUNoaWxkKGxvZ3MubGFzdENoaWxkKTtcclxuICAgIH1cclxuICBpbml0TG9ncygpXHJcbn1cclxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NsZWFyTG9ncycpLm9uY2xpY2sgPSBjbGVhckxvZ3NcclxuXHJcbmZ1bmN0aW9uIGluaXRMb2dzKCkge1xyXG4gICAgY29uc3Qgbm9Mb2dUZXh0ID0gJ25vIGxvZ3MuLi4nXHJcbiAgICBsZXQgbG9ncyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dzJylcclxuICAgIGxldCBub0xvZ3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbm9Mb2dzJylcclxuICAgIGlmICghbm9Mb2dzKSB7XHJcbiAgICAgIG5vTG9ncyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKVxyXG4gICAgICBub0xvZ3MuaWQgPSAnbm9Mb2dzJ1xyXG4gICAgICBub0xvZ3MuaW5uZXJUZXh0ID0gbm9Mb2dUZXh0XHJcbiAgICAgIGxvZ3MuYXBwZW5kQ2hpbGQobm9Mb2dzKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbm9Mb2dzLmlubmVyVGV4dCA9IG5vTG9nVGV4dFxyXG4gICAgfSAgIFxyXG59XHJcbmluaXRMb2dzKClcclxubGV0IG15Rmlyc3RSZWFjdGl2ZUNvbXBvbmVudCA9IG1ha2VSZWFjdGl2ZShjb21wb25lbnRPbmUpXHJcbmNvbnNvbGUubG9nKG15Rmlyc3RSZWFjdGl2ZUNvbXBvbmVudClcclxuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICBteUZpcnN0UmVhY3RpdmVDb21wb25lbnQuYyA9IFwiaGVsbG8gQ2hpY2FnbyEhXCJcclxufSwgMjAwMClcclxuXHJcbiJdLCJzb3VyY2VSb290IjoiIn0=