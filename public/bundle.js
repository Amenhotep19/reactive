var Reactivity=function(e){var t={};function n(o){if(t[o])return t[o].exports;var l=t[o]={i:o,l:!1,exports:{}};return e[o].call(l.exports,l,l.exports,n),l.l=!0,l.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);let o=0,l=0;const i={info(e){let t=document.getElementById("noLogs");t&&""!==t.innerText&&(t.innerText="");let n=document.createElement("p");n.id="logText",n.innerText=e,document.getElementById("logs").appendChild(n)}},r=(e,t,n)=>{t.classList.add(e),setTimeout(()=>{t.classList.remove(e)},n)},p=function(e){this.subscribers=new Set,this.depend=function(e){this.subscribers.add(e)},this.notify=function(){for(let e of this.subscribers)i.info(this.name+" notifying "+e.name),e.update()},this.id=l++,this.name=e};p.target=null;const a=function(e,t,n,...l){this.update=function(){t.apply(n,l)},this.id=o++,this.name=e},c=function(e,t,n,o){console.log("bindPropToTemplate:"+t+":"+this[n]),p.target=new a("Binding prop Watcher: "+t,this.render,this,e,t,o);"function"==typeof this[n]?this[n].apply(this):-1!==n.indexOf(".")?((e,t)=>{let n=t.split(".");console.log(n);let o=e[n[0]];for(let e=1;e<n.length;e++)o=o[n[e]]})(this,n):this[n];p.target=null},d=function(e,t,n){let o=document.getElementById(t);if(o)o.innerHTML=e.apply(this),r("activeProps",o,3e3);else{let l=document.getElementById(n);(o=document.createElement("div")).id=t,o.innerHTML=e.apply(this),l.appendChild(o),r("initProps",o,1e3)}},u=function(e,t,n){if("object"!=typeof e)return e;let o={};for(let l in e){let i=e[l];"object"==typeof e[l]&&(i=u(e[l],t,!0));let r=new p(l);Object.defineProperty(n?o:t,l,{get:function(){return p.target&&r.depend(p.target),i},set:function(e){i=u(e,t),r.notify()}})}return n?o:t},m=function(e,t,n){const o=e.computed,l=e.templates,i=e.props||[],r=e.components||[],s=e.data&&e.data()||{};let f={};return f.render=d,f.bindPropToTemplate=c,f.name=e.name,f.el=e.el,u(s,f),function(e,t){let n={},o={};for(let l in t){let i=null;n[l]=new a("Computed watcher prop: "+l,function(){i=t[l].apply(e),o[l].notify()},null),p.target=n[l],i=t[l].apply(e),p.target=null,o[l]=new p(l),Object.defineProperty(e,l,{get:function(){return p.target&&(o[l].depend(p.target),p.target=null),i}})}}(f,o),function(e,t,n,o){for(let l of t){let t=new p(l);Object.defineProperty(e,l,{get:function(){return p.target&&t.depend(p.target),o[n[l]]}})}}(f,i,t,n),function(e,t){for(let n of t)e.bindPropToTemplate(n.html,n.id,n.prop),e.render(n.html,n.id,e.el)}(f,l),function(e,t){for(let n of t){let t=n.template(),o=n.name,l=n.value;l.templates;if(-1===t.indexOf(o)){console.warn(`${o} not defined in the template`);break}{let n=t.split("</"+o+">")[0].split("data-"),i={};for(let e of n)if(-1!==e.indexOf("=")){let t=e.split("=");i[t[0]]=t[1].split('"')[1]}console.log("propValueHash:"+JSON.stringify(i)),m(l,i,e)}}}(f,r),f};var s={templateForA:function(){return`<p>Hello, I am a <i>data</i> prop. You can call me <strong>A</strong>: ${this.a}</p>`},templateForB:function(){return`<p>Hello, I am a <i>computed</i> prop. You can call me <strong>B</strong> (A * 10): ${this.b}</p>`},templateForC:function(){return`<p>Hello, I am a <i>data</i> prop. You can call me <strong>C</strong>: ${this.c}</p>`},templateForD:function(){return`<p>Hello, I am a <i>computed</i> prop. You can call me <strong>D</strong> (B + 11): ${this.d}</p>`},templateForF:function(){return`<p>Hello, I am a <i>nested data</i> prop. You can call me <strong>F</strong>(Length): ${this.e.f}</p>`},templateForG:function(){return`<p>Hello, I am a <i>nested data</i> prop. You can call me <strong>G</strong>(Width): ${this.e.g}</p>`},templateForH:function(){return`<p>Hello, I am a <i>nested computed</i> prop. You can call me <strong>H</strong>(Area): ${this.nestedComputed}</p>`},templateAForComponentB:function(){return`<p>I'm a child component I have inherited my parent's property a: ${this.a1}</p>`},templateBForComponentB:function(){return`<p>I'm a child component. This is my property B1: ${this.b1}</p>`},templateForChildComponentPlaceholder:function(){return'<my-child-component data-a1="a"></my-child-component>'}};const f={name:"componentOne",data:()=>({a:5,c:"Hello there!!",e:{f:5,g:6}}),computed:{b:function(){return 10*this.a},d:function(){return this.b+11},nestedComputed:function(){return isNaN(this.e.f)||isNaN(this.e.g)?0:this.e.f*this.e.g}},el:"componentOne",templates:[{html:s.templateForA,id:"a",prop:"a"},{html:s.templateForB,id:"b",prop:"b"},{html:s.templateForC,id:"c",prop:"c"},{html:s.templateForD,id:"d",prop:"d"},{html:s.templateForF,id:"f",prop:"e.f"},{html:s.templateForG,id:"g",prop:"e.g"},{html:s.templateForH,id:"h",prop:"nestedComputed"}],components:[{name:"my-child-component",value:{name:"childComponent",el:"childComponent",props:["a1"],data:()=>({b1:10}),templates:[{html:s.templateAForComponentB,id:"child_a",prop:"a1"},{html:s.templateBForComponentB,id:"child_b",prop:"b1"}]},template:s.templateForChildComponentPlaceholder}]};function h(){let e=document.getElementById("logs"),t=document.getElementById("noLogs");t?t.innerText="no logs...":((t=document.createElement("p")).id="noLogs",t.innerText="no logs...",e.appendChild(t))}document.getElementById("inputA").onchange=function(e){let t=document.getElementById("inputA").value;isNaN(t)||(g.a=t)},document.getElementById("inputC").onchange=function(e){let t=document.getElementById("inputC").value;g.c=t},document.getElementById("inputF").onchange=function(e){let t=document.getElementById("inputF").value;g.e.f=t},document.getElementById("inputG").onchange=function(e){let t=document.getElementById("inputG").value;g.e.g=t},document.getElementById("clearLogs").onclick=function(e){let t=document.getElementById("logs");for(;t.hasChildNodes()&&"Dependency Tracker"!=t.lastChild.innerText;)t.removeChild(t.lastChild);h()},h();let g=m(f);console.log(g),setTimeout(()=>{g.c="hello Chicago!!"},2e3)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9SZWFjdGl2aXR5L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL1JlYWN0aXZpdHkvLi9nbG9iYWxzLmpzIiwid2VicGFjazovL1JlYWN0aXZpdHkvLi91dGlscy5qcyIsIndlYnBhY2s6Ly9SZWFjdGl2aXR5Ly4vcmVhY3RpdmUvZGVwLmpzIiwid2VicGFjazovL1JlYWN0aXZpdHkvLi9yZWFjdGl2ZS93YXRjaGVyLmpzIiwid2VicGFjazovL1JlYWN0aXZpdHkvLi9yZWFjdGl2ZS9iaW5kUHJvcC5qcyIsIndlYnBhY2s6Ly9SZWFjdGl2aXR5Ly4vcmVuZGVyLmpzIiwid2VicGFjazovL1JlYWN0aXZpdHkvLi9yZWFjdGl2ZS9vYnNlcnZlci5qcyIsIndlYnBhY2s6Ly9SZWFjdGl2aXR5Ly4vdGVtcGxhdGVzLmpzIiwid2VicGFjazovL1JlYWN0aXZpdHkvLi9jb21wb25lbnRzLmpzIiwid2VicGFjazovL1JlYWN0aXZpdHkvLi90ZXN0LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsInZhbHVlIiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnbG9iYWxXYXRjaGVyQ291bnQiLCJnbG9iYWxEZXBUcmFja2VyQ291bnQiLCJsb2dnZXIiLCJbb2JqZWN0IE9iamVjdF0iLCJtc2ciLCJub0xvZ3MiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaW5uZXJUZXh0IiwiY3JlYXRlRWxlbWVudCIsImlkIiwiYXBwZW5kQ2hpbGQiLCJhZGRBbmRSZW1vdmVDbGFzcyIsImNsYXNzTmFtZSIsImVsIiwidGltZW91dCIsImNsYXNzTGlzdCIsImFkZCIsInNldFRpbWVvdXQiLCJyZW1vdmUiLCJEZXAiLCJ0aGlzIiwic3Vic2NyaWJlcnMiLCJTZXQiLCJkZXBlbmQiLCJub3RpZnkiLCJpbmZvIiwidXBkYXRlIiwidGFyZ2V0IiwiV2F0Y2hlciIsImNiIiwidm0iLCJhcmdzIiwiYXBwbHkiLCJiaW5kUHJvcFRvVGVtcGxhdGUiLCJ0ZW1wbGF0ZSIsInByb3AiLCJjb21wb25lbnRJZCIsImNvbnNvbGUiLCJsb2ciLCJyZW5kZXIiLCJpbmRleE9mIiwicHJvcHMiLCJfcHJvcHMiLCJzcGxpdCIsImxlbmd0aCIsInRyYXZlcnNlVG9Qcm9wIiwiaW5uZXJIVE1MIiwiY29tcG9uZW50Um9vdCIsImluaXREYXRhIiwib2JqIiwicmVhY3RpdmUiLCJuZXN0ZWQiLCJ3cmFwcGVyIiwidmFsIiwiZGVwIiwic2V0IiwibmV3VmFsIiwibWFrZVJlYWN0aXZlIiwicHJvcFZhbHVlSGFzaCIsInBhcmVudCIsImNvbXB1dGVkIiwidGVtcGxhdGVzIiwiY29tcG9uZW50cyIsImRhdGEiLCJjb21wdXRlZFdhdGNoZXJzIiwiY29tcHV0ZWREZXBzIiwiY2FjaGVkVmFsdWUiLCJpbml0Q29tcHV0ZWQiLCJpbml0UHJvcHMiLCJodG1sIiwiaW5pdFRlbXBsYXRlcyIsImNvbXBvbmVudCIsIndhcm4iLCJhdHRycyIsImF0dHIiLCJrdnAiLCJKU09OIiwic3RyaW5naWZ5IiwiaW5pdENvbXBvbmVudHMiLCJ0ZW1wbGF0ZXNfMCIsInRlbXBsYXRlRm9yQSIsImEiLCJ0ZW1wbGF0ZUZvckIiLCJiIiwidGVtcGxhdGVGb3JDIiwidGVtcGxhdGVGb3JEIiwidGVtcGxhdGVGb3JGIiwiZSIsImYiLCJ0ZW1wbGF0ZUZvckciLCJnIiwidGVtcGxhdGVGb3JIIiwibmVzdGVkQ29tcHV0ZWQiLCJ0ZW1wbGF0ZUFGb3JDb21wb25lbnRCIiwiYTEiLCJ0ZW1wbGF0ZUJGb3JDb21wb25lbnRCIiwiYjEiLCJ0ZW1wbGF0ZUZvckNoaWxkQ29tcG9uZW50UGxhY2Vob2xkZXIiLCJjb21wb25lbnRPbmUiLCJpc05hTiIsImluaXRMb2dzIiwibG9ncyIsIm9uY2hhbmdlIiwibXlGaXJzdFJlYWN0aXZlQ29tcG9uZW50Iiwib25jbGljayIsImhhc0NoaWxkTm9kZXMiLCJsYXN0Q2hpbGQiLCJyZW1vdmVDaGlsZCJdLCJtYXBwaW5ncyI6IjJCQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUEyQ0EsT0F0Q0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FDQUssY0FBQSxFQUNBQyxZQUFBLEVBQ0FDLElBQUFOLEtBTUFaLEVBQUFtQixFQUFBLFNBQUFqQixHQUNBWSxPQUFBQyxlQUFBYixFQUFBLGNBQWlEa0IsT0FBQSxLQUlqRHBCLEVBQUFxQixFQUFBLFNBQUFsQixHQUNBLElBQUFTLEVBQUFULEtBQUFtQixXQUNBLFdBQTJCLE9BQUFuQixFQUFBLFNBQzNCLFdBQWlDLE9BQUFBLEdBRWpDLE9BREFILEVBQUFVLEVBQUFFLEVBQUEsSUFBQUEsR0FDQUEsR0FJQVosRUFBQWEsRUFBQSxTQUFBVSxFQUFBQyxHQUFzRCxPQUFBVixPQUFBVyxVQUFBQyxlQUFBbkIsS0FBQWdCLEVBQUFDLElBR3REeEIsRUFBQTJCLEVBQUEsSUFJQTNCLElBQUE0QixFQUFBLHlDQ2xFQSxJQUFBQyxFQUFBLEVBQ0FDLEVBQUEsRUNE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QUFBLFNBQ0FMLEVBQUFHLFVBTkEsYUFPQThGLEVBQUEzRixZQUFBTixJQXpDQUMsU0FBQUMsZUFBQSxVQUFBZ0csU0FOQSxTQUFBZixHQUNBLElBQUFsQyxFQUFBaEQsU0FBQUMsZUFBQSxVQUFBaEIsTUFDQTZHLE1BQUE5QyxLQUNBa0QsRUFBQXRCLEVBQUE1QixJQVNBaEQsU0FBQUMsZUFBQSxVQUFBZ0csU0FKQSxTQUFBZixHQUNBLElBQUFsQyxFQUFBaEQsU0FBQUMsZUFBQSxVQUFBaEIsTUFDQWlILEVBQUE1SCxFQUFBMEUsR0FRQWhELFNBQUFDLGVBQUEsVUFBQWdHLFNBSkEsU0FBQWYsR0FDQSxJQUFBbEMsRUFBQWhELFNBQUFDLGVBQUEsVUFBQWhCLE1BQ0FpSCxFQUFBaEIsRUFBQUMsRUFBQW5DLEdBUUFoRCxTQUFBQyxlQUFBLFVBQUFnRyxTQUpBLFNBQUFmLEdBQ0EsSUFBQWxDLEVBQUFoRCxTQUFBQyxlQUFBLFVBQUFoQixNQUNBaUgsRUFBQWhCLEVBQUFHLEVBQUFyQyxHQWVBaEQsU0FBQUMsZUFBQSxhQUFBa0csUUFYQSxTQUFBakIsR0FDQSxJQUFBYyxFQUFBaEcsU0FBQUMsZUFBQSxRQUNBLEtBQUErRixFQUFBSSxpQkFFQSxzQkFEQUosRUFBQUssVUFDQW5HLFdBR0E4RixFQUFBTSxZQUFBTixFQUFBSyxXQUVBTixLQWlCQUEsSUFDQSxJQUFBRyxFQUFBOUMsRUFBQXlDLEdBQ0E3RCxRQUFBQyxJQUFBaUUsR0FDQXRGLFdBQUEsS0FDQXNGLEVBQUE1SCxFQUFBLG1CQUNDIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9cIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiLy9HbG9iYWwgdmFyaWFibGVzXHJcbmxldCBnbG9iYWxXYXRjaGVyQ291bnQgPSAwXHJcbmxldCBnbG9iYWxEZXBUcmFja2VyQ291bnQgPSAwXHJcbmV4cG9ydCB7Z2xvYmFsV2F0Y2hlckNvdW50LCBnbG9iYWxEZXBUcmFja2VyQ291bnR9IiwiLy9UcmF2ZXJzZSB0byB0aGUgbmVzdGVkIHByb3BcclxuY29uc3QgdHJhdmVyc2VUb1Byb3AgPSAodGFyZ2V0LCBwcm9wcykgPT4ge1xyXG4gICAgbGV0IF9wcm9wcyA9IHByb3BzLnNwbGl0KCcuJylcclxuICAgIGNvbnNvbGUubG9nKF9wcm9wcylcclxuICAgIGxldCB2YWwgPSB7fVxyXG4gICAgbGV0IG8gPSB0YXJnZXRbX3Byb3BzWzBdXVxyXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBfcHJvcHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgbyA9IG9bX3Byb3BzW2ldXVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9cclxuICB9XHJcbiAvLyBMb2dnZXIgdG8gbG9nIGRlcGVuZGVuY3kgbm90aWZpY2F0aW9uc1xyXG4gIGNvbnN0IGxvZ2dlciA9IHtcclxuICAgIGluZm8gKG1zZykge1xyXG4gICAgICBsZXQgbm9Mb2dzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25vTG9ncycpXHJcbiAgICAgIGlmKG5vTG9ncyAmJiBub0xvZ3MuaW5uZXJUZXh0ICE9PSAnJykge1xyXG4gICAgICAgIG5vTG9ncy5pbm5lclRleHQgPSAnJ1xyXG4gICAgICB9XHJcbiAgICAgIGxldCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpXHJcbiAgICAgIHAuaWQgPSAnbG9nVGV4dCdcclxuICAgICAgcC5pbm5lclRleHQgPSBtc2dcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ3MnKS5hcHBlbmRDaGlsZChwKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3QgYWRkQW5kUmVtb3ZlQ2xhc3MgPSAoY2xhc3NOYW1lLCBlbCwgdGltZW91dCkgPT4ge1xyXG4gICAgZWwuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSlcclxuICAgIH0sIHRpbWVvdXQpXHJcbn1cclxuICBcclxuICBleHBvcnQge3RyYXZlcnNlVG9Qcm9wLCBsb2dnZXIsIGFkZEFuZFJlbW92ZUNsYXNzfVxyXG4gXHJcbiAgIiwiIGltcG9ydCB7Z2xvYmFsRGVwVHJhY2tlckNvdW50fSBmcm9tICcuLi9nbG9iYWxzLmpzJ1xyXG4gaW1wb3J0IHtsb2dnZXJ9IGZyb20gJy4uL3V0aWxzLmpzJ1xyXG4gLy9EZXBlbmRlbmN5IFRyYWNrZXIsIG1haW50YWlucyBhIGxpc3Qgb2Ygc3Vic2NyaWJlcnMsIGFuZCBhbiBhY3RpdmUgdGFyZ2V0IChjYW4gb25seSBiZSBvbmUgYXQgYW55IHBvaW50IGluIHRpbWUpXHJcbmNvbnN0IERlcCA9IGZ1bmN0aW9uKG5hbWUpIHtcclxuICB0aGlzLnN1YnNjcmliZXJzID0gbmV3IFNldCgpXHJcbiAgdGhpcy5kZXBlbmQgPSBmdW5jdGlvbihzKSB7XHJcbiAgICAgIHRoaXMuc3Vic2NyaWJlcnMuYWRkKHMpXHJcbiAgfVxyXG4gIHRoaXMubm90aWZ5ID0gZnVuY3Rpb24oKSB7XHJcbiAgICBmb3IgKGxldCBzIG9mIHRoaXMuc3Vic2NyaWJlcnMpe1xyXG4gICAgICBsb2dnZXIuaW5mbyh0aGlzLm5hbWUgKyAnIG5vdGlmeWluZyAnICsgcy5uYW1lKVxyXG4gICAgICBzLnVwZGF0ZSgpXHJcbiAgICB9XHJcbiAgfVxyXG4gIHRoaXMuaWQgPSBnbG9iYWxEZXBUcmFja2VyQ291bnQrK1xyXG4gIHRoaXMubmFtZSA9IG5hbWVcclxufVxyXG5EZXAudGFyZ2V0ID0gbnVsbFxyXG5leHBvcnQge0RlcH1cclxuIiwiaW1wb3J0IHtnbG9iYWxXYXRjaGVyQ291bnR9IGZyb20gJy4uL2dsb2JhbHMuanMnXHJcbi8vV2F0Y2hlciAtIGF0dGFjaGVzIGFzIGFuIGFjdGl2ZSBkZXAgdGFyZ2V0LCBmaXJlcyB0aGUgdXBkYXRlIGNhbGxiYWNrXHJcbmV4cG9ydCBjb25zdCBXYXRjaGVyID0gZnVuY3Rpb24obmFtZSwgY2IsIHZtLCAuLi5hcmdzKSB7XHJcbiAgICB0aGlzLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICBjYi5hcHBseSh2bSwgYXJncylcclxuICAgIH1cclxuICAgIHRoaXMuaWQgPSBnbG9iYWxXYXRjaGVyQ291bnQrK1xyXG4gICAgdGhpcy5uYW1lID0gbmFtZVxyXG59IiwiICBpbXBvcnQge0RlcH0gZnJvbSAnLi9kZXAuanMnXHJcbiAgaW1wb3J0IHtXYXRjaGVyfSBmcm9tICcuL3dhdGNoZXIuanMnXHJcbiAgaW1wb3J0IHt0cmF2ZXJzZVRvUHJvcH0gZnJvbSAnLi4vdXRpbHMuanMnXHJcblxyXG4gIC8vRm4gdG8gYmluZCBjb21wb25lbnQncyBwcm9wcyB0byBodG1sIHRlbXBsYXRlXHJcbiAgZXhwb3J0IGNvbnN0IGJpbmRQcm9wVG9UZW1wbGF0ZSA9IGZ1bmN0aW9uKHRlbXBsYXRlLCBpZCwgcHJvcCwgY29tcG9uZW50SWQpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiYmluZFByb3BUb1RlbXBsYXRlOlwiICsgaWQgKyBcIjpcIiArIHRoaXNbcHJvcF0pXHJcbiAgICBEZXAudGFyZ2V0ID0gbmV3IFdhdGNoZXIoJ0JpbmRpbmcgcHJvcCBXYXRjaGVyOiAnICsgaWQsIHRoaXMucmVuZGVyLCB0aGlzLCB0ZW1wbGF0ZSwgaWQsIGNvbXBvbmVudElkKVxyXG4gICAgbGV0IHZhbCA9IHR5cGVvZih0aGlzW3Byb3BdKSA9PT0gXCJmdW5jdGlvblwiID8gdGhpc1twcm9wXS5hcHBseSh0aGlzKSA6IHByb3AuaW5kZXhPZignLicpICE9PSAtMSA/IHRyYXZlcnNlVG9Qcm9wKHRoaXMsIHByb3ApIDogdGhpc1twcm9wXVxyXG4gICAgRGVwLnRhcmdldCA9IG51bGxcclxuICB9IiwiaW1wb3J0IHthZGRBbmRSZW1vdmVDbGFzc30gZnJvbSAnLi91dGlscy5qcydcclxuXHJcbi8vb25seSB0aGlzIGd1eSBzaG91bGQgdG91Y2ggdGhlIERPTSwga2lkZGluZyBub3RcclxuZXhwb3J0IGNvbnN0IHJlbmRlciA9IGZ1bmN0aW9uICh0ZW1wbGF0ZSwgaWQsIGNvbXBvbmVudElkKSB7XHJcbiAgICBsZXQgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZClcclxuICAgIGlmICghZWwpIHtcclxuICAgICAgICBsZXQgY29tcG9uZW50Um9vdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbXBvbmVudElkKVxyXG4gICAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICBlbC5pZCA9IGlkXHJcbiAgICAgICAgZWwuaW5uZXJIVE1MID0gdGVtcGxhdGUuYXBwbHkodGhpcylcclxuICAgICAgICBjb21wb25lbnRSb290LmFwcGVuZENoaWxkKGVsKVxyXG4gICAgICAgIGFkZEFuZFJlbW92ZUNsYXNzKCdpbml0UHJvcHMnLCBlbCwgMTAwMClcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGVsLmlubmVySFRNTCA9IHRlbXBsYXRlLmFwcGx5KHRoaXMpXHJcbiAgICAgIGFkZEFuZFJlbW92ZUNsYXNzKCdhY3RpdmVQcm9wcycsIGVsLCAzMDAwKVxyXG4gICAgfVxyXG59XHJcblxyXG4iLCJcclxuaW1wb3J0IHsgRGVwIH0gZnJvbSAnLi9kZXAuanMnXHJcbmltcG9ydCB7IFdhdGNoZXIgfSBmcm9tICcuL3dhdGNoZXIuanMnXHJcbmltcG9ydCB7IGJpbmRQcm9wVG9UZW1wbGF0ZSB9IGZyb20gJy4vYmluZFByb3AuanMnXHJcbmltcG9ydCB7IHJlbmRlciB9IGZyb20gJy4uL3JlbmRlci5qcydcclxuXHJcbmNvbnN0IGluaXREYXRhID0gZnVuY3Rpb24gKG9iaiwgcmVhY3RpdmUsIG5lc3RlZCkge1xyXG4gIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0Jykge1xyXG4gICAgcmV0dXJuIG9ialxyXG4gIH1cclxuICBsZXQgd3JhcHBlciA9IHt9XHJcblxyXG4gIGZvciAobGV0IHByb3AgaW4gb2JqKSB7XHJcbiAgICBsZXQgdmFsID0gb2JqW3Byb3BdXHJcbiAgICBpZiAodHlwZW9mIG9ialtwcm9wXSA9PT0gXCJvYmplY3RcIikge1xyXG4gICAgICB2YWwgPSBpbml0RGF0YShvYmpbcHJvcF0sIHJlYWN0aXZlLCB0cnVlKVxyXG4gICAgfVxyXG4gICAgbGV0IGRlcCA9IG5ldyBEZXAocHJvcClcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXN0ZWQgPyB3cmFwcGVyIDogcmVhY3RpdmUsIHByb3AsIHtcclxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKERlcC50YXJnZXQpIHtcclxuICAgICAgICAgIGRlcC5kZXBlbmQoRGVwLnRhcmdldClcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHZhbFxyXG4gICAgICB9LFxyXG4gICAgICBzZXQ6IGZ1bmN0aW9uIChuZXdWYWwpIHtcclxuICAgICAgICB2YWwgPSBpbml0RGF0YShuZXdWYWwsIHJlYWN0aXZlKVxyXG4gICAgICAgIGRlcC5ub3RpZnkoKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH1cclxuICByZXR1cm4gbmVzdGVkID8gd3JhcHBlciA6IHJlYWN0aXZlXHJcbn1cclxuXHJcbmNvbnN0IG1ha2VSZWFjdGl2ZSA9IGZ1bmN0aW9uICh2bSwgcHJvcFZhbHVlSGFzaCwgcGFyZW50KSB7XHJcbiAgY29uc3QgY29tcHV0ZWQgPSB2bS5jb21wdXRlZFxyXG4gIGNvbnN0IHRlbXBsYXRlcyA9IHZtLnRlbXBsYXRlc1xyXG4gIGNvbnN0IHByb3BzID0gdm0ucHJvcHMgfHwgW11cclxuICBjb25zdCBjb21wb25lbnRzID0gdm0uY29tcG9uZW50cyB8fCBbXVxyXG4gIGNvbnN0IGRhdGEgPSAodm0uZGF0YSAmJiB2bS5kYXRhKCkpIHx8IHt9XHJcbiAgbGV0IHJlYWN0aXZlID0ge31cclxuXHJcbiAgcmVhY3RpdmUucmVuZGVyID0gcmVuZGVyXHJcbiAgcmVhY3RpdmUuYmluZFByb3BUb1RlbXBsYXRlID0gYmluZFByb3BUb1RlbXBsYXRlXHJcbiAgcmVhY3RpdmUubmFtZSA9IHZtLm5hbWVcclxuICByZWFjdGl2ZS5lbCA9IHZtLmVsXHJcbiAgXHJcbiAgaW5pdERhdGEoZGF0YSwgcmVhY3RpdmUpXHJcblxyXG4gIGluaXRDb21wdXRlZChyZWFjdGl2ZSwgY29tcHV0ZWQpXHJcblxyXG4gIGluaXRQcm9wcyhyZWFjdGl2ZSwgcHJvcHMsIHByb3BWYWx1ZUhhc2gsIHBhcmVudClcclxuXHJcbiAgaW5pdFRlbXBsYXRlcyhyZWFjdGl2ZSwgdGVtcGxhdGVzKVxyXG5cclxuICBpbml0Q29tcG9uZW50cyhyZWFjdGl2ZSwgY29tcG9uZW50cylcclxuXHJcbiAgcmV0dXJuIHJlYWN0aXZlXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluaXRDb21wdXRlZChyZWFjdGl2ZSwgY29tcHV0ZWQpIHtcclxuICBsZXQgY29tcHV0ZWRXYXRjaGVycyA9IHt9XHJcbiAgbGV0IGNvbXB1dGVkRGVwcyA9IHt9XHJcblxyXG4gIC8vUmVhY3RpdmUgY29tcHV0ZWQgcHJvcHNcclxuICBmb3IgKGxldCBwcm9wIGluIGNvbXB1dGVkKSB7XHJcbiAgICBsZXQgY2FjaGVkVmFsdWUgPSBudWxsXHJcbiAgICAvL0NvbXB1dGVkIHByb3BlcnRpZXMgZ2V0cyB0aGVpciBvd24gd2F0Y2hlcnMgd2hpY2ggcmVjb21wdXRlIHRoZSBmbiBhbmQgbm90aWZ5IGl0cyBkZXBlbmRlbnRzXHJcbiAgICBjb21wdXRlZFdhdGNoZXJzW3Byb3BdID0gbmV3IFdhdGNoZXIoJ0NvbXB1dGVkIHdhdGNoZXIgcHJvcDogJyArIHByb3AsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgY2FjaGVkVmFsdWUgPSBjb21wdXRlZFtwcm9wXS5hcHBseShyZWFjdGl2ZSlcclxuICAgICAgY29tcHV0ZWREZXBzW3Byb3BdLm5vdGlmeSgpXHJcbiAgICB9LCBudWxsKVxyXG5cclxuICAgIERlcC50YXJnZXQgPSBjb21wdXRlZFdhdGNoZXJzW3Byb3BdXHJcbiAgICBjYWNoZWRWYWx1ZSA9IGNvbXB1dGVkW3Byb3BdLmFwcGx5KHJlYWN0aXZlKVxyXG4gICAgRGVwLnRhcmdldCA9IG51bGxcclxuXHJcbiAgICBjb21wdXRlZERlcHNbcHJvcF0gPSBuZXcgRGVwKHByb3ApXHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocmVhY3RpdmUsIHByb3AsIHtcclxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKERlcC50YXJnZXQpIHtcclxuICAgICAgICAgIGNvbXB1dGVkRGVwc1twcm9wXS5kZXBlbmQoRGVwLnRhcmdldClcclxuICAgICAgICAgIERlcC50YXJnZXQgPSBudWxsXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjYWNoZWRWYWx1ZVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdFByb3BzKHJlYWN0aXZlLCBwcm9wcywgcHJvcFZhbHVlSGFzaCwgcGFyZW50KSB7XHJcbiAgZm9yIChsZXQgcHJvcCBvZiBwcm9wcykge1xyXG4gICAgbGV0IGRlcCA9IG5ldyBEZXAocHJvcClcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZWFjdGl2ZSwgcHJvcCwge1xyXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoRGVwLnRhcmdldCkge1xyXG4gICAgICAgICAgZGVwLmRlcGVuZChEZXAudGFyZ2V0KVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcGFyZW50W3Byb3BWYWx1ZUhhc2hbcHJvcF1dXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBpbml0VGVtcGxhdGVzKHJlYWN0aXZlLCB0ZW1wbGF0ZXMpIHtcclxuICBmb3IgKGxldCB0ZW1wbGF0ZSBvZiB0ZW1wbGF0ZXMpIHtcclxuICAgIHJlYWN0aXZlLmJpbmRQcm9wVG9UZW1wbGF0ZSh0ZW1wbGF0ZS5odG1sLCB0ZW1wbGF0ZS5pZCwgdGVtcGxhdGUucHJvcClcclxuICAgIHJlYWN0aXZlLnJlbmRlcih0ZW1wbGF0ZS5odG1sLCB0ZW1wbGF0ZS5pZCwgcmVhY3RpdmUuZWwpXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBpbml0Q29tcG9uZW50cyhyZWFjdGl2ZSwgY29tcG9uZW50cykge1xyXG4gIGZvciAobGV0IGNvbXBvbmVudCBvZiBjb21wb25lbnRzKSB7XHJcbiAgICBsZXQgdGVtcGxhdGUgPSBjb21wb25lbnQudGVtcGxhdGUoKVxyXG4gICAgbGV0IG5hbWUgPSBjb21wb25lbnQubmFtZVxyXG4gICAgbGV0IHZhbHVlID0gY29tcG9uZW50LnZhbHVlXHJcbiAgICBsZXQgY2hpbGRUZW1wbGF0ZXMgPSB2YWx1ZS50ZW1wbGF0ZXNcclxuICAgIGlmICh0ZW1wbGF0ZS5pbmRleE9mKG5hbWUpID09PSAtMSkge1xyXG4gICAgICBjb25zb2xlLndhcm4oYCR7bmFtZX0gbm90IGRlZmluZWQgaW4gdGhlIHRlbXBsYXRlYClcclxuICAgICAgYnJlYWtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGxldCBhdHRycyA9IHRlbXBsYXRlLnNwbGl0KCc8LycgKyBuYW1lICsgJz4nKVswXS5zcGxpdCgnZGF0YS0nKVxyXG4gICAgICBsZXQgcHJvcFZhbHVlSGFzaCA9IHt9XHJcbiAgICAgIGZvciAobGV0IGF0dHIgb2YgYXR0cnMpIHtcclxuICAgICAgICBpZiAoYXR0ci5pbmRleE9mKCc9JykgIT09IC0xKSB7XHJcbiAgICAgICAgICBsZXQga3ZwID0gYXR0ci5zcGxpdCgnPScpXHJcbiAgICAgICAgICBwcm9wVmFsdWVIYXNoW2t2cFswXV0gPSBrdnBbMV0uc3BsaXQoJ1wiJylbMV1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgY29uc29sZS5sb2coJ3Byb3BWYWx1ZUhhc2g6JyArIEpTT04uc3RyaW5naWZ5KHByb3BWYWx1ZUhhc2gpKVxyXG4gICAgICBtYWtlUmVhY3RpdmUodmFsdWUsIHByb3BWYWx1ZUhhc2gsIHJlYWN0aXZlKVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgbWFrZVJlYWN0aXZlIH1cclxuXHJcbiIsIlxyXG5sZXQgdGVtcGxhdGVGb3JBID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gYDxwPkhlbGxvLCBJIGFtIGEgPGk+ZGF0YTwvaT4gcHJvcC4gWW91IGNhbiBjYWxsIG1lIDxzdHJvbmc+QTwvc3Ryb25nPjogJHt0aGlzLmF9PC9wPmBcclxuICB9XHJcbiAgXHJcbiAgbGV0IHRlbXBsYXRlRm9yQiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIGA8cD5IZWxsbywgSSBhbSBhIDxpPmNvbXB1dGVkPC9pPiBwcm9wLiBZb3UgY2FuIGNhbGwgbWUgPHN0cm9uZz5CPC9zdHJvbmc+IChBICogMTApOiAke3RoaXMuYn08L3A+YFxyXG4gIH1cclxuICBcclxuICBsZXQgdGVtcGxhdGVGb3JDID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gYDxwPkhlbGxvLCBJIGFtIGEgPGk+ZGF0YTwvaT4gcHJvcC4gWW91IGNhbiBjYWxsIG1lIDxzdHJvbmc+Qzwvc3Ryb25nPjogJHt0aGlzLmN9PC9wPmBcclxuICB9XHJcbiAgXHJcbiAgbGV0IHRlbXBsYXRlRm9yRCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIGA8cD5IZWxsbywgSSBhbSBhIDxpPmNvbXB1dGVkPC9pPiBwcm9wLiBZb3UgY2FuIGNhbGwgbWUgPHN0cm9uZz5EPC9zdHJvbmc+IChCICsgMTEpOiAke3RoaXMuZH08L3A+YFxyXG4gIH1cclxuICBcclxuICBcclxuICBsZXQgdGVtcGxhdGVGb3JGID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gYDxwPkhlbGxvLCBJIGFtIGEgPGk+bmVzdGVkIGRhdGE8L2k+IHByb3AuIFlvdSBjYW4gY2FsbCBtZSA8c3Ryb25nPkY8L3N0cm9uZz4oTGVuZ3RoKTogJHt0aGlzLmUuZn08L3A+YFxyXG4gIH1cclxuICBcclxuICBsZXQgdGVtcGxhdGVGb3JHID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gYDxwPkhlbGxvLCBJIGFtIGEgPGk+bmVzdGVkIGRhdGE8L2k+IHByb3AuIFlvdSBjYW4gY2FsbCBtZSA8c3Ryb25nPkc8L3N0cm9uZz4oV2lkdGgpOiAke3RoaXMuZS5nfTwvcD5gXHJcbiAgfVxyXG4gIFxyXG4gIGxldCB0ZW1wbGF0ZUZvckggPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBgPHA+SGVsbG8sIEkgYW0gYSA8aT5uZXN0ZWQgY29tcHV0ZWQ8L2k+IHByb3AuIFlvdSBjYW4gY2FsbCBtZSA8c3Ryb25nPkg8L3N0cm9uZz4oQXJlYSk6ICR7dGhpcy5uZXN0ZWRDb21wdXRlZH08L3A+YFxyXG4gIH1cclxuICBcclxuICBsZXQgdGVtcGxhdGVBRm9yQ29tcG9uZW50QiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIGA8cD5JJ20gYSBjaGlsZCBjb21wb25lbnQgSSBoYXZlIGluaGVyaXRlZCBteSBwYXJlbnQncyBwcm9wZXJ0eSBhOiAke3RoaXMuYTF9PC9wPmBcclxuICB9XHJcbiAgXHJcbiAgbGV0IHRlbXBsYXRlQkZvckNvbXBvbmVudEIgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBgPHA+SSdtIGEgY2hpbGQgY29tcG9uZW50LiBUaGlzIGlzIG15IHByb3BlcnR5IEIxOiAke3RoaXMuYjF9PC9wPmBcclxuICB9XHJcbiAgXHJcbiAgbGV0IHRlbXBsYXRlRm9yQ2hpbGRDb21wb25lbnRQbGFjZWhvbGRlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIGA8bXktY2hpbGQtY29tcG9uZW50IGRhdGEtYTE9XCJhXCI+PC9teS1jaGlsZC1jb21wb25lbnQ+YFxyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGRlZmF1bHQge1xyXG4gICAgICB0ZW1wbGF0ZUZvckEsXHJcbiAgICAgIHRlbXBsYXRlRm9yQixcclxuICAgICAgdGVtcGxhdGVGb3JDLFxyXG4gICAgICB0ZW1wbGF0ZUZvckQsXHJcbiAgICAgIHRlbXBsYXRlRm9yRixcclxuICAgICAgdGVtcGxhdGVGb3JHLFxyXG4gICAgICB0ZW1wbGF0ZUZvckgsXHJcbiAgICAgIHRlbXBsYXRlQUZvckNvbXBvbmVudEIsXHJcbiAgICAgIHRlbXBsYXRlQkZvckNvbXBvbmVudEIsXHJcbiAgICAgIHRlbXBsYXRlRm9yQ2hpbGRDb21wb25lbnRQbGFjZWhvbGRlclxyXG4gIH0iLCIvL0NvbXBvbmVudCBEZWZpbml0aW9uc1xyXG5pbXBvcnQgdGVtcCBmcm9tICcuL3RlbXBsYXRlcy5qcydcclxuY29uc3QgY2hpbGRDb21wb25lbnQgPSB7XHJcbiAgICBuYW1lOiAnY2hpbGRDb21wb25lbnQnLFxyXG4gICAgZWw6ICdjaGlsZENvbXBvbmVudCcsXHJcbiAgICBwcm9wczogWydhMSddLFxyXG4gICAgZGF0YSgpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBiMTogMTBcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHRlbXBsYXRlczogW3tcclxuICAgICAgICBodG1sOiB0ZW1wLnRlbXBsYXRlQUZvckNvbXBvbmVudEIsXHJcbiAgICAgICAgaWQ6IFwiY2hpbGRfYVwiLFxyXG4gICAgICAgIHByb3A6IFwiYTFcIlxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaHRtbDogdGVtcC50ZW1wbGF0ZUJGb3JDb21wb25lbnRCLFxyXG4gICAgICAgIGlkOiBcImNoaWxkX2JcIixcclxuICAgICAgICBwcm9wOiBcImIxXCJcclxuICAgICAgfVxyXG4gICAgXVxyXG4gIH1cclxuICBcclxuICBjb25zdCBjb21wb25lbnRPbmUgPSB7XHJcbiAgICBuYW1lOiAnY29tcG9uZW50T25lJyxcclxuICAgIGRhdGEoKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgYTogNSxcclxuICAgICAgICBjOiAnSGVsbG8gdGhlcmUhIScsXHJcbiAgICAgICAgZToge1xyXG4gICAgICAgICAgZjogNSxcclxuICAgICAgICAgIGc6IDZcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBjb21wdXRlZDoge1xyXG4gICAgICBiOiBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hICogMTBcclxuICAgICAgfSxcclxuICAgICAgZDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYiArIDExXHJcbiAgICAgIH0sXHJcbiAgICAgIG5lc3RlZENvbXB1dGVkOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoaXNOYU4odGhpcy5lLmYpIHx8IGlzTmFOKHRoaXMuZS5nKSkge1xyXG4gICAgICAgICAgcmV0dXJuIDBcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZS5mICogdGhpcy5lLmdcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGVsOiAnY29tcG9uZW50T25lJyxcclxuICAgIHRlbXBsYXRlczogW3tcclxuICAgICAgICBodG1sOiB0ZW1wLnRlbXBsYXRlRm9yQSxcclxuICAgICAgICBpZDogXCJhXCIsXHJcbiAgICAgICAgcHJvcDogXCJhXCJcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGh0bWw6IHRlbXAudGVtcGxhdGVGb3JCLFxyXG4gICAgICAgIGlkOiBcImJcIixcclxuICAgICAgICBwcm9wOiBcImJcIlxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaHRtbDogdGVtcC50ZW1wbGF0ZUZvckMsXHJcbiAgICAgICAgaWQ6IFwiY1wiLFxyXG4gICAgICAgIHByb3A6IFwiY1wiXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBodG1sOiB0ZW1wLnRlbXBsYXRlRm9yRCxcclxuICAgICAgICBpZDogXCJkXCIsXHJcbiAgICAgICAgcHJvcDogXCJkXCJcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGh0bWw6IHRlbXAudGVtcGxhdGVGb3JGLFxyXG4gICAgICAgIGlkOiBcImZcIixcclxuICAgICAgICBwcm9wOiBcImUuZlwiXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBodG1sOiB0ZW1wLnRlbXBsYXRlRm9yRyxcclxuICAgICAgICBpZDogXCJnXCIsXHJcbiAgICAgICAgcHJvcDogXCJlLmdcIlxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaHRtbDogdGVtcC50ZW1wbGF0ZUZvckgsXHJcbiAgICAgICAgaWQ6IFwiaFwiLFxyXG4gICAgICAgIHByb3A6IFwibmVzdGVkQ29tcHV0ZWRcIlxyXG4gICAgICB9XHJcbiAgICBdLFxyXG4gICAgY29tcG9uZW50czogW3tcclxuICAgICAgbmFtZTogJ215LWNoaWxkLWNvbXBvbmVudCcsXHJcbiAgICAgIHZhbHVlOiBjaGlsZENvbXBvbmVudCxcclxuICAgICAgdGVtcGxhdGU6IHRlbXAudGVtcGxhdGVGb3JDaGlsZENvbXBvbmVudFBsYWNlaG9sZGVyXHJcbiAgICB9XVxyXG4gIH1cclxuXHJcbiAgZXhwb3J0IHtjaGlsZENvbXBvbmVudCwgY29tcG9uZW50T25lfSIsImltcG9ydCB7IG1ha2VSZWFjdGl2ZSB9IGZyb20gJy4vcmVhY3RpdmUvb2JzZXJ2ZXIuanMnXHJcbmltcG9ydCB7IGNvbXBvbmVudE9uZSB9IGZyb20gJy4vY29tcG9uZW50cy5qcydcclxuLy9FdmVudCBoYW5kbGVyIGZvciBpbnB1dCBjaGFuZ2VzXHJcbmZ1bmN0aW9uIHNldFZhbEZvckEoZSkge1xyXG4gICAgbGV0IHZhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dEEnKS52YWx1ZTtcclxuICAgIGlmICghaXNOYU4odmFsKSkge1xyXG4gICAgICAgIG15Rmlyc3RSZWFjdGl2ZUNvbXBvbmVudC5hID0gdmFsXHJcbiAgICB9XHJcbn1cclxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0QScpLm9uY2hhbmdlID0gc2V0VmFsRm9yQVxyXG5cclxuZnVuY3Rpb24gc2V0VmFsRm9yQyhlKSB7XHJcbiAgICBsZXQgdmFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0QycpLnZhbHVlO1xyXG4gICAgbXlGaXJzdFJlYWN0aXZlQ29tcG9uZW50LmMgPSB2YWxcclxufVxyXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5wdXRDJykub25jaGFuZ2UgPSBzZXRWYWxGb3JDXHJcblxyXG5mdW5jdGlvbiBzZXRWYWxGb3JGKGUpIHtcclxuICAgIGxldCB2YWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5wdXRGJykudmFsdWU7XHJcbiAgICBteUZpcnN0UmVhY3RpdmVDb21wb25lbnQuZS5mID0gdmFsXHJcbn1cclxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0RicpLm9uY2hhbmdlID0gc2V0VmFsRm9yRlxyXG5cclxuZnVuY3Rpb24gc2V0VmFsRm9yRyhlKSB7XHJcbiAgICBsZXQgdmFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0RycpLnZhbHVlO1xyXG4gICAgbXlGaXJzdFJlYWN0aXZlQ29tcG9uZW50LmUuZyA9IHZhbFxyXG59XHJcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dEcnKS5vbmNoYW5nZSA9IHNldFZhbEZvckdcclxuXHJcbmZ1bmN0aW9uIGNsZWFyTG9ncyhlKSB7XHJcbiAgbGV0IGxvZ3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9ncycpXHJcbiAgd2hpbGUgKGxvZ3MuaGFzQ2hpbGROb2RlcygpKSB7XHJcbiAgICBjb25zdCBsYXN0TG9nID0gbG9ncy5sYXN0Q2hpbGRcclxuICAgIGlmIChsYXN0TG9nLmlubmVyVGV4dCA9PSAnRGVwZW5kZW5jeSBUcmFja2VyJykge1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgbG9ncy5yZW1vdmVDaGlsZChsb2dzLmxhc3RDaGlsZCk7XHJcbiAgICB9XHJcbiAgaW5pdExvZ3MoKVxyXG59XHJcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbGVhckxvZ3MnKS5vbmNsaWNrID0gY2xlYXJMb2dzXHJcblxyXG5mdW5jdGlvbiBpbml0TG9ncygpIHtcclxuICAgIGNvbnN0IG5vTG9nVGV4dCA9ICdubyBsb2dzLi4uJ1xyXG4gICAgbGV0IGxvZ3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9ncycpXHJcbiAgICBsZXQgbm9Mb2dzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25vTG9ncycpXHJcbiAgICBpZiAoIW5vTG9ncykge1xyXG4gICAgICBub0xvZ3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJylcclxuICAgICAgbm9Mb2dzLmlkID0gJ25vTG9ncydcclxuICAgICAgbm9Mb2dzLmlubmVyVGV4dCA9IG5vTG9nVGV4dFxyXG4gICAgICBsb2dzLmFwcGVuZENoaWxkKG5vTG9ncylcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG5vTG9ncy5pbm5lclRleHQgPSBub0xvZ1RleHRcclxuICAgIH0gICBcclxufVxyXG5pbml0TG9ncygpXHJcbmxldCBteUZpcnN0UmVhY3RpdmVDb21wb25lbnQgPSBtYWtlUmVhY3RpdmUoY29tcG9uZW50T25lKVxyXG5jb25zb2xlLmxvZyhteUZpcnN0UmVhY3RpdmVDb21wb25lbnQpXHJcbnNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgbXlGaXJzdFJlYWN0aXZlQ29tcG9uZW50LmMgPSBcImhlbGxvIENoaWNhZ28hIVwiXHJcbn0sIDIwMDApXHJcblxyXG4iXSwic291cmNlUm9vdCI6IiJ9